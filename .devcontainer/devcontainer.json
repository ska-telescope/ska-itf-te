{
    "name": "ska-mid-itf devcontainer",
    "dockerFile": "Dockerfile",
    "context": "..",
    // Set *default* container specific settings.json values on container create.
    "customizations": {
        "vscode": {
            "settings": {
                "terminal.integrated.profiles.linux": {
                    "bash": {
                        "path": "/bin/bash"
                    }
                },
                "vs-kubernetes.kubeconfig": "/home/tango/.kube/config",
                "python.envFile": "${workspaceFolder}/.vscode/.env",
                "terminal.integration.defaultProfile.linux": "bash",
                "python.pythonPath": ".venv/bin/python",
                "autoDocstring.docstringFormat": "sphinx",
                "gitPrefix.pattern": "(\\w+-\\d+).*",
                "gitPrefix.replacement": "p1.replace(/(\\w+)/, function(v) { return v.toUpperCase();})+\": \"",
                "gitPrefix.replacementIsFunction": true,
                "[python]": {
                    "editor.defaultFormatter": "ms-python.black-formatter",
                    "editor.formatOnSave": true
                },
                "python.testing.pytestArgs": [
                    "tests"
                ],
                "python.testing.unittestEnabled": false,
                "python.testing.pytestEnabled": true,
                "python.formatting.provider": "none"
            },
            // Add the IDs of extensions you want installed when the container is created.
            "extensions": [
                "ms-python.python",
                "trond-snekvik.simple-rst",
                "davidanson.vscode-markdownlint",
                "ryanluker.vscode-coverage-gutters",
                "srmeyers.git-prefix",
                "ms-python.vscode-pylance",
                "ms-kubernetes-tools.vscode-kubernetes-tools",
                "donjayamanne.githistory",
                "njpwerner.autodocstring",
                "streetsidesoftware.code-spell-checker",
                "bungcip.better-toml",
                "freakypie.code-python-isort",
                "srmeyers.git-prefix",
                "ms-python.black-formatter",
                "ms-python.flake8",
                "ms-python.isort"
            ]
        }
    },
    "runArgs": [
        // for itf nameserver
        "--dns",
        "10.164.10.4",
        "--dns",
        "8.8.8.8"
    ],
    //this may break if you are attempting to do this from a non debian host
    // therefore manualy uncomment it in your branch if you want to use K8s
    // "mounts": [
    //     "source=${localEnv:HOME}${localEnv:USERPROFILE}/code/skampi-code/ska-skampi/,target=/workspaces/ska-mid-itf/build/,type=bind,consistency=cached",
    //     "source=${localEnv:HOME}${localEnv:USERPROFILE}/.kube,target=/home/tango/.kube,type=bind,consistency=cached"
    // ],
    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [],
    // Use 'postCreateCommand' to run commands after the container is created.
    "postCreateCommand": "poetry config virtualenvs.in-project true",
    // if you want to work with k8 and helm directly from this container:
    /*
    "features": {
        "ghcr.io/devcontainers/features/sshd:1": "1.0.9",
        "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {},
        "ghcr.io/mpriscella/features/helm-chart-testing:1": {},
        "ghcr.io/eitsupi/devcontainer-features/jq-likes:1": {},
        "ghcr.io/devcontainers/features/docker-in-docker:2.3.0": {
            "version": "latest",
            "moby": true
        }
    },*/
    "remoteUser": "tango"
    // "remoteEnv": {
    //     "PATH": "/home/tango/.local/bin:${containerEnv:PATH}",
    // },
}